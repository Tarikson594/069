<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>Frankfurt Jump & Run ‚Äì Iteration 4.1 (Querformat Mobile)</title>
  <meta name="theme-color" content="#0b0d14" />
  <style>
    :root{ --bg:#0b0d14;--panel:#111628;--panel2:#1a2140;--edge:#252e4b;--accent:#79a8ff;--text:#e8eeff; }
    html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font-family:system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;height:100%;}
    #wrap{max-width:1100px;margin:0 auto;padding:12px;height:100%;}
    header{display:flex;gap:12px;align-items:center;justify-content:space-between;margin-bottom:8px}
    .logo{font-weight:800;letter-spacing:.2px}
    #hud{display:flex;gap:10px;flex-wrap:wrap;background:var(--panel);border:1px solid var(--edge);padding:8px 12px;border-radius:10px}
    .badge{background:var(--panel2);border:1px solid var(--edge);padding:4px 10px;border-radius:8px;font-weight:600}
    #msg{min-height:1.2em;margin-left:6px;opacity:.95}

    #canvasWrap{position:relative;height:calc(100% - 90px)}
    canvas{background:linear-gradient(#14243b,#0c1222 55%);width:100%;height:100%;border:1px solid var(--edge);border-radius:12px;display:block}

    /* Dialog */
    #dialog{position:absolute;left:50%;top:12%;transform:translateX(-50%);width:min(700px,92%);background:#0f1426;border:1px solid #2c365e;border-radius:14px;display:none;box-shadow:0 20px 60px rgba(0,0,0,.5);z-index:5}
    #dialog header{padding:10px 14px;border-bottom:1px solid #212a4b;font-weight:800}
    #dialog .content{padding:12px 14px;line-height:1.45}
    #dialog .choices{display:flex;flex-direction:column;gap:8px;padding:10px 14px 14px}
    #dialog button{background:#182246;color:#e9ecff;border:1px solid #2d3b70;padding:10px 12px;border-radius:10px;cursor:pointer;text-align:left}
    #dialog button:hover{background:#1e2a58}

    /* Overlays */
    .overlay{position:absolute;inset:0;display:none;align-items:center;justify-content:center;background:rgba(6,10,20,.72);z-index:6;text-align:center;padding:20px}
    .panel{background:#0f1426;border:1px solid #2c365e;border-radius:14px;padding:18px;text-align:center;max-width:min(680px,92%)}
    .panel h1{margin:.2em 0 .2em;font-size:28px}
    .panel p{opacity:.95}
    .btnRow{display:flex;gap:10px;justify-content:center;margin-top:10px;flex-wrap:wrap}
    .btn{background:#182246;color:#e9ecff;border:1px solid #2d3b70;padding:10px 14px;border-radius:10px;cursor:pointer;font-weight:700}
    .btn.secondary{background:#12182e;border-color:#253462;color:#cdd7ff}

    /* Touch controls */
    #touch{position:absolute;inset:auto 0 0 0;display:none;justify-content:space-between;gap:12px;padding:10px;z-index:7;pointer-events:none;}
    .pad{display:flex;gap:10px;pointer-events:auto;}
    .tc{user-select:none;-webkit-user-select:none;touch-action:none;min-width:80px;min-height:80px;border-radius:14px;border:1px solid #2b3a6a;background:rgba(20,30,60,.55);backdrop-filter: blur(4px);color:#e8eeff;font-weight:800;font-size:28px;display:flex;align-items:center;justify-content:center}
    .tc:active{background:rgba(30,46,88,.7)}
    @media (orientation: landscape) and (max-width: 1024px){ #touch{display:flex} }

    /* Layout for touch buttons in landscape */
    #touchLeft{position:absolute;bottom:20px;left:20px;display:flex;gap:20px;}
    #touchRight{position:absolute;bottom:20px;right:20px;display:flex;flex-direction:column;gap:20px;}

    /* Orientation overlay */
    #rotateOL{position:absolute;inset:0;background:rgba(0,0,0,0.85);color:white;font-size:20px;display:none;align-items:center;justify-content:center;z-index:10;text-align:center;padding:20px}
  </style>
</head>
<body>
  <div id="wrap">
    <header>
      <div class="logo">Frankfurt 2D ‚Äì Hbf ‚ûú Ostend (It. 4.1)</div>
      <div id="hud">
        <span class="badge" id="money">‚Ç¨ 100</span>
        <span class="badge" id="karma">Karma: 0</span>
        <span class="badge" id="zone">Start: Hbf</span>
      </div>
    </header>
    <div id="msg"></div>

    <div id="canvasWrap">
      <canvas id="game" width="960" height="540"></canvas>

      <!-- Dialog -->
      <div id="dialog">
        <header id="dlgTitle">Entscheidung</header>
        <div class="content" id="dlgText"></div>
        <div class="choices" id="dlgChoices"></div>
      </div>

      <!-- Overlays -->
      <div id="startOL" class="overlay" style="display:flex">
        <div class="panel">
          <h1>Von Hbf bis Ostend</h1>
          <p>Bitte im <b>Querformat</b> spielen üì±‚ÜîÔ∏è</p>
          <p><b>Steuerung:</b> A/‚Üê & D/‚Üí ¬∑ SPACE/W/‚Üë springen ¬∑ <b>E</b> interagieren ¬∑ <b>R</b> Neustart</p>
          <div class="btnRow">
            <button class="btn" id="btnStart">Starten</button>
          </div>
        </div>
      </div>

      <div id="endOL" class="overlay">
        <div class="panel">
          <h1 id="endTitle">Geschafft!</h1>
          <p id="endText">Zusammenfassung</p>
          <div class="btnRow">
            <button class="btn" id="btnRestart">Nochmal</button>
          </div>
        </div>
      </div>

      <!-- Touch controls (separate left/right pads) -->
      <div id="touch">
        <div id="touchLeft" class="pad">
          <div class="tc" id="btnLeft">‚óÄ</div>
          <div class="tc" id="btnRight">‚ñ∂</div>
        </div>
        <div id="touchRight" class="pad">
          <div class="tc" id="btnJump">‚§í</div>
          <div class="tc" id="btnAct">E</div>
        </div>
      </div>

      <!-- Orientation overlay -->
      <div id="rotateOL">Bitte drehe dein Ger√§t ins Querformat üì±‚ÜîÔ∏è</div>
    </div>
  </div>

<script>
(() => {
  const rotateOL = document.getElementById('rotateOL');
  function checkOrientation(){
    if(window.innerHeight > window.innerWidth){ // Portrait
      rotateOL.style.display='flex';
    } else {
      rotateOL.style.display='none';
    }
  }
  window.addEventListener('resize', checkOrientation);
  window.addEventListener('orientationchange', checkOrientation);
  checkOrientation();
})();
</script>
</body>
</html>